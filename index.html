<!doctype html>
<html class="no-js" lang="">

<head>
  <meta charset="utf-8">
  <title></title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta property="og:title" content="">
  <meta property="og:type" content="">
  <meta property="og:url" content="">
  <meta property="og:image" content="">

  <link rel="manifest" href="site.webmanifest">
  <link rel="apple-touch-icon" href="icon.png">
  <!-- Place favicon.ico in the root directory -->

  <meta name="theme-color" content="#fafafa">
</head>

<body>

    <script>

        function loadJSON(callback) {   
            const urlJson = 'https://raw.githubusercontent.com/Xatpy/mareas/main/noviembre_2020.json';
            var xobj = new XMLHttpRequest();
            xobj.overrideMimeType("application/json");
            xobj.open('GET', urlJson, true); // Replace 'my_data' with the path to your file
            xobj.onreadystatechange = function () {
            if (xobj.readyState == 4 && xobj.status == "200") {
                // Required use of an anonymous callback as .open will NOT return a value but simply returns undefined in asynchronous mode
                callback(xobj.responseText);
            }
            };
            xobj.send(null);  
        }

        function init() {
            loadJSON(function(response) {
            // Parse JSON string into object
                const actual_JSON = JSON.parse(response);

                const mareas = actual_JSON.dias[getDay() - 1].mareas;

                const date = getTodayDate()
                document.write(date + "<br>");
                const time = getHour();
                document.write(time);
                document.write("<br><br>");
                for (let i = 0; i < mareas.length; ++i) {
                    document.write(mareas[i].hora + " --- " + mareas[i].tipo);
                    document.write("<br>");
                }

                debugger
            });
        }

        function getHour() {
            var today = new Date();
            var time = today.getHours() + ":" + today.getMinutes() + ":" + today.getSeconds();
            return time;
        }

        function getTodayDate() {
            var today = new Date();
            var date = today.getFullYear()+'-'+(today.getMonth()+1)+'-'+today.getDate();
            return date;
            //return today.getDate();
        }

        function getDay() {
            var today = new Date();
            return today.getDate();
        }

        window.onload = function() {
            init();
        };

    </script>

  <!-- Google Analytics: change UA-XXXXX-Y to be your site's ID. -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-XXXXX-Y', 'auto'); ga('set', 'anonymizeIp', true); ga('set', 'transport', 'beacon'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async></script>
</body>

</html>
